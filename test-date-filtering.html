<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Filtering Test</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .date-filter-controls {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .date-filter-row {
            display: flex;
            gap: 15px;
            align-items: end;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        .date-input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .date-input {
            padding: 8px 12px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        .btn-filter, .btn-clear {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
        }
        .btn-filter {
            background: #4299e1;
            color: white;
        }
        .btn-clear {
            background: #718096;
            color: white;
        }
        .status-message {
            margin-top: 15px;
            padding: 10px 15px;
            border-radius: 8px;
            border-left: 4px solid #38a169;
            background: #e6fffa;
        }
        .warning-message {
            background: #fff5f5;
            border-left-color: #ed8936;
        }
        .no-data-message {
            text-align: center;
            padding: 40px;
            color: #718096;
            background: #f7fafc;
            border: 2px dashed #e2e8f0;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ðŸ“… Date Filtering Test</h1>
        <p>This page demonstrates the improved date filtering functionality.</p>
        
        <div class="date-filter-controls">
            <h3><i class="fas fa-calendar-alt"></i> Filter by Date Range</h3>
            <div class="date-filter-row">
                <div class="date-input-group">
                    <label for="dateFrom">From:</label>
                    <input type="date" id="dateFrom" class="date-input">
                </div>
                <div class="date-input-group">
                    <label for="dateTo">To:</label>
                    <input type="date" id="dateTo" class="date-input">
                </div>
                <button onclick="applyDateFilter()" class="btn-filter">
                    <i class="fas fa-filter"></i> Apply Filter
                </button>
                <button onclick="clearDateFilter()" class="btn-clear">
                    <i class="fas fa-times"></i> Clear
                </button>
            </div>
            <div id="dateFilterStatus" class="status-message" style="display: none;"></div>
        </div>
        
        <div id="dataDisplay">
            <div class="no-data-message">
                <i class="fas fa-calendar-times" style="font-size: 2rem; color: #cbd5e0; margin-bottom: 15px;"></i>
                <h3>No Data Available</h3>
                <p>No tracking data found for the selected date range.</p>
                <p><small>Historical date-based filtering is not available in the current system.</small></p>
                <button onclick="clearDateFilter()" class="btn-filter" style="margin-top: 15px;">
                    <i class="fas fa-times"></i> Clear Date Filter
                </button>
            </div>
        </div>
    </div>

    <script>
        // Date filter state
        let dateFilter = {
            enabled: false,
            from: null,
            to: null
        };

        // Set default date range (current date)
        function setDefaultDateRange() {
            const today = new Date();
            const todayString = today.toISOString().split('T')[0];
            
            document.getElementById('dateFrom').value = todayString;
            document.getElementById('dateTo').value = todayString;
        }

        // Apply date filter
        function applyDateFilter() {
            const fromDate = document.getElementById('dateFrom').value;
            const toDate = document.getElementById('dateTo').value;
            
            if (!fromDate && !toDate) {
                alert('Please select at least one date');
                return;
            }
            
            // Validate date range
            if (fromDate && toDate && new Date(fromDate) > new Date(toDate)) {
                alert('From date cannot be after To date');
                return;
            }
            
            dateFilter.enabled = true;
            dateFilter.from = fromDate || null;
            dateFilter.to = toDate || null;
            
            // Update status display with warning about limitations
            const status = document.getElementById('dateFilterStatus');
            status.innerHTML = `
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                    <i class="fas fa-exclamation-triangle" style="color: #ed8936;"></i>
                    <span><strong>Date Filter Applied:</strong> From ${dateFilter.from ? new Date(dateFilter.from).toLocaleDateString() : 'Any'} to ${dateFilter.to ? new Date(dateFilter.to).toLocaleDateString() : 'Any'}</span>
                </div>
                <div style="font-size: 0.85rem; color: #718096; background: #fff5f5; padding: 8px 12px; border-radius: 6px; border-left: 3px solid #ed8936;">
                    <i class="fas fa-info-circle"></i>
                    <strong>Note:</strong> Historical date-based filtering is not available in the current system. 
                    The system only stores current aggregated data. To implement historical filtering, 
                    the tracking system would need to be modified to store data with timestamps.
                </div>
            `;
            status.style.display = 'block';
            
            console.log('ðŸ“… Date filter applied:', dateFilter);
        }

        // Clear date filter
        function clearDateFilter() {
            dateFilter.enabled = false;
            dateFilter.from = null;
            dateFilter.to = null;
            
            // Reset to default dates (today)
            setDefaultDateRange();
            document.getElementById('dateFilterStatus').textContent = '';
            document.getElementById('dateFilterStatus').style.display = 'none';
            
            // Show normal data message
            document.getElementById('dataDisplay').innerHTML = `
                <div style="background: #f0fff4; padding: 20px; border-radius: 8px; border-left: 4px solid #38a169;">
                    <h3 style="margin: 0 0 10px 0; color: #22543d;">
                        <i class="fas fa-check-circle"></i> Data Available
                    </h3>
                    <p style="margin: 0; color: #2f855a;">
                        Showing current aggregated data (no date filter applied).
                    </p>
                </div>
            `;
            
            console.log('ðŸ“… Date filter cleared');
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            setDefaultDateRange();
        });
    </script>
</body>
</html>
